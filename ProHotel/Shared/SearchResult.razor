@using ProHotel.Data
@inject RoomEntryService RoomEntryService;

<div class="search-result">
	<h1>Znaleziono @roomsCount @text</h1>
	<ul class="search-result-list">
		@foreach (var entry in _rooms)
		{
			<li class="search-result-element">
				<RoomEntry Room=@entry />
			</li>
		}
	</ul>
</div>

@code {
	private Room[]? _rooms;

	public int roomsCount = 0;
	public string text = "";

	[Parameter]
	public bool Random { get; set; }

	[Parameter]
	public SearchField SearchField { get; set; }

	protected override async Task OnInitializedAsync()
	{
		_rooms = await RoomEntryService.GetRooms(Random);
		roomsCount = _rooms.Length;
		text = roomsCount > 4 ? "pokoi" : roomsCount > 1 ? "pokoje" : roomsCount < 1 ? "pokoi" : "pokój";
	}
}